<idea-plugin package="com.intellij.feedback">
  <extensionPoints>
    <extensionPoint qualifiedName="com.intellij.feedback.idleFeedbackSurvey" interface="com.intellij.platform.feedback.FeedbackSurvey"
                    dynamic="true"/>
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">

    <applicationService serviceImplementation="com.intellij.feedback.common.state.DontShowAgainFeedbackService"/>

    <notificationGroup displayType="BALLOON" id="Feedback In IDE" bundle="messages.CommonFeedbackMessages"
                       key="notification.group.feedback"/>

    <typedHandler implementation="com.intellij.feedback.common.track.EditorInputEventTracker"/>
    <typedHandler implementation="com.intellij.feedback.aqua.track.AquaEditorTypingChecker"/>
    <backgroundPostStartupActivity implementation="com.intellij.feedback.aqua.track.AquaFirstUsageLogger"/>
    <editorFactoryMouseListener implementation="com.intellij.feedback.common.track.EditorInputEventTracker"/>
    <editorFactoryMouseMotionListener implementation="com.intellij.feedback.common.track.EditorInputEventTracker"/>

    <registryKey key="platform.feedback" defaultValue="true" description="Enable to collect user feedback"/>
    <registryKey key="platform.feedback.time.to.show.notification" defaultValue="600"
                 description="Explicitly sets the number of seconds until the feedback notification is displayed."/>
    <statistics.applicationUsagesCollector implementation="com.intellij.feedback.common.statistics.DontShowAgainValueCollector"/>
    <statistics.applicationUsagesCollector implementation="com.intellij.feedback.common.statistics.FeedbackSurveysStateCollector"/>
    <statistics.counterUsagesCollector implementationClass="com.intellij.feedback.common.statistics.FeedbackNotificationCountCollector"/>

    <feedback.idleFeedbackSurvey survey_id="demo_survey" implementation="com.intellij.feedback.demo.DemoInIdeFeedbackSurvey"/>
  </extensions>

  <applicationListeners>
    <listener class="com.intellij.feedback.localization.service.LocalizationFeedbackStartupListener"
              topic="com.intellij.ide.AppLifecycleListener"/>
    <listener class="com.intellij.feedback.pycharmUi.state.NewUserFirstRunDateTracker"
              topic="com.intellij.ide.AppLifecycleListener"/>
  </applicationListeners>

  <actions>
    <group id="FeedbackDialogGroup" internal="true">
      <separator/>
      <action id="com.intellij.feedback.demo.action.ShowDemoFeedbackDialogAction"
              class="com.intellij.feedback.demo.action.ShowDemoFeedbackDialogAction" internal="true"/>
      <action id="com.intellij.feedback.demo.action.ShowDemoFeedbackDialogWithEmailAction"
              class="com.intellij.feedback.demo.action.ShowDemoFeedbackDialogWithEmailAction" internal="true"/>
      <action id="com.intellij.feedback.aqua.TestShowAquaNewUserFeedbackAction"
              class="com.intellij.feedback.aqua.TestShowAquaNewUserFeedbackAction" internal="true"/>
      <action id="com.intellij.feedback.aqua.TestShowAquaOldUserFeedbackAction"
              class="com.intellij.feedback.aqua.TestShowAquaOldUserFeedbackAction" internal="true"/>
      <action id="com.intellij.feedback.pycharmUi.TestShowNewUIFeedbackAction"
              class="com.intellij.feedback.pycharmUi.TestShowNewUIFeedbackAction"
              internal="true"/>
      <action id="com.intellij.feedback.new_ui.TestShowNewUIFeedbackAction"
              class="com.intellij.feedback.new_ui.TestShowNewUIFeedbackAction"
              internal="true"/>
      <action id="com.intellij.feedback.localization.dialog.ShowLocalizationFeedbackDialog"
              class="com.intellij.feedback.localization.dialog.ShowLocalizationFeedbackDialog"
              internal="true"/>
      <action id="com.intellij.feedback.kafka.TestShowKafkaConsumerFeedbackAction"
              class="com.intellij.feedback.kafka.TestShowKafkaConsumerFeedbackAction" internal="true"/>
      <action id="com.intellij.feedback.kafka.TestShowKafkaProducerFeedbackAction"
              class="com.intellij.feedback.kafka.TestShowKafkaProducerFeedbackAction" internal="true"/>
      <add-to-group group-id="Internal.UI" anchor="last"/>
    </group>
  </actions>
</idea-plugin>